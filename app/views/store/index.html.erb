
  <h1 class="ui header">Print your shirt</h1>
  <div class="main-container">
  <div id="tshirtTemplate">
    <%= image_tag "/assets/white.png", class: "tshirt" %>
  </div>

  <h2>Select t-shirt colour</h2>
<% @products.each do |product|%>
  <% if product.size === "S" %>
    <table>
      <tr>
        <td class="colour_thumbnail", id="<%= product.colour %>"><%= image_tag product.thumbnail, class: product.colour %></td>
      </tr>
  <% end %>
<% end %>
      <tr>
        <td id="price"><%= number_to_currency(@products.first.price) %></td>
      </tr>
      <tr>
        <td>
          <select name="size"> <!-- create Size dropdown menu -->
            <% @sizes.each do |u| %>
              <option value="<%= u %>"><%= u %></option>
            <% end %>
          </select>
        </td>
      </tr>
    </table>

<button class="ui submit button">Add to Cart</button>
 <!-- need to update the path and params for this button -->

<% @designs.each do |design|%>
  <table>
    <tr>
      <td class="design_thumbnail", src="<%= design.img_src %>", id="<%= design.id %>"><%= image_tag design.img_src %></td>
      <!-- <td><%= design.name %></td> -->
    </tr>
  </table>
<% end %>

<script>
  $(document).ready(function(){
    $(".colour_thumbnail").on("click", function(e){ // select shirt colour
      var colour = $(this).attr("id");
      console.log(colour);
      $("#tshirtTemplate").html("");
      $("#tshirtTemplate").append($("<img>").attr("src", "/assets/" + colour + ".png").attr("class", "tshirt").attr("id", colour));
    });

    $(".design_thumbnail").on("click", function(){ // select design to apply on t-shirt
      $(".design_container").html("");
      var designUrl = $(this).attr("src");
      var design_id = $(this).attr("id");
      console.log(design_id)
      var $designImg = $("<img>").attr("src", designUrl).attr("class", "design_img").attr("id", design_id);
      var $designContainer = $("<div>").attr("class", "design_container").append($designImg);
      $designContainer.css({
        top: "30px",
        left: "70px",
        position: "absolute"
      });
      $(".main-container").append($designContainer);
      $designContainer.draggable();
      $designImg.resizable({aspectRatio: true});
    });

    $("button").on("click", function(){
      var top = $(".tshirt").position().top - $(".design_container").position().top;
      var left = $(".tshirt").position().left - $(".design_img").position().left;
      var tshirtWidth = $(".tshirt").css("width");
      var tshirtHeight = $(".tshirt").css("height");
      var width = $(".design_img").css("width");
      var height = $(".design_img").css("height");
      var widthRatio = (parseInt(width.substr(0, width.length - 2)) / parseInt(tshirtWidth.substr(0, tshirtWidth.length - 2))) * 100
      // var heightRatio = (height / tshirtHeight) * 100

      // str.substr(0, str.length - 2)
      console.log(top)
      console.log(left)
      console.log(tshirtWidth)
      console.log(tshirtHeight)
      console.log(widthRatio)
      // console.log(heightRatio)

    });
  })
</script>
</div>
